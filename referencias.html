<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Referencias - Ciencia, Tecnologia y Sociedad</title>
    
    <!-- Bootstrap 5.3 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link href="assets/css/styles.css" rel="stylesheet">
</head>
<body>
    <!-- Navigation -->
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top">
        <div class="container">
            <a class="navbar-brand fw-bold" href="index.html">
                <i class="bi bi-book"></i> Ciencia, Tecnologia y Sociedad
            </a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="index.html">Inicio</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="timeline.html">Línea de Tiempo</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="referencias.html">Referencias</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="bibliografia.html">Bibliografía</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="autores.html">Los Autores</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Header Section -->
    <section class="py-5 mt-5 bg-light">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 mx-auto text-center">
                    <h1 class="display-4 fw-bold mb-3">
                        <i class="bi bi-journal-bookmark-fill text-success"></i>
                        Referencias por Capítulo
                    </h1>
                    <p class="lead text-muted mb-0">Recursos adicionales organizados por capítulo con enlaces directos a Wikipedia</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Referencias Section -->
    <section class="py-5">
        <div class="container">
            <div class="row">
                <!-- Sidebar Navigation -->
                <div class="col-lg-3">
                    <div class="referencias-nav">
                        <div class="card border-0 shadow-sm">
                            <div class="card-header bg-primary text-white">
                                <h6 class="mb-0 fw-bold">
                                    <i class="bi bi-list-ul"></i> Capítulos
                                </h6>
                            </div>
                            <div class="card-body p-0">
                                <nav class="nav nav-pills flex-column p-3">
                                    <a class="nav-link active" href="#" data-chapter="capitulo-1" onclick="loadChapter('capitulo-1', this)">
                                        <i class="bi bi-1-circle"></i> Capítulo 1: Introducción
                                    </a>
                                    <a class="nav-link" href="#" data-chapter="capitulo-2" onclick="loadChapter('capitulo-2', this)">
                                        <i class="bi bi-2-circle"></i> Capítulo 2: Desarrollo
                                    </a>
                                    <a class="nav-link" href="#" data-chapter="capitulo-3" onclick="loadChapter('capitulo-3', this)">
                                        <i class="bi bi-3-circle"></i> Capítulo 3: Análisis
                                    </a>
                                    <a class="nav-link" href="#" data-chapter="capitulo-4" onclick="loadChapter('capitulo-4', this)">
                                        <i class="bi bi-4-circle"></i> Capítulo 4: Síntesis
                                    </a>
                                    <a class="nav-link" href="#" data-chapter="capitulo-5" onclick="loadChapter('capitulo-5', this)">
                                        <i class="bi bi-5-circle"></i> Capítulo 5: Conclusiones
                                    </a>
                                </nav>
                            </div>
                        </div>
                        
                        <!-- Statistics Card -->
                        <div class="card border-0 shadow-sm mt-3">
                            <div class="card-body text-center">
                                <i class="bi bi-graph-up text-success display-4 mb-2"></i>
                                <h6 class="fw-bold">Estadísticas</h6>
                                <p class="mb-1"><span class="fw-bold text-primary" id="total-referencias">0</span> Referencias totales</p>
                                <p class="mb-0"><span class="fw-bold text-success" id="current-chapter-refs">0</span> En capítulo actual</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Content Area -->
                <div class="col-lg-9">
                    <!-- Chapter Header -->
                    <div class="mb-4">
                        <div class="card border-0 bg-primary text-white">
                            <div class="card-body">
                                <h3 class="card-title mb-0" id="chapter-title">
                                    <i class="bi bi-1-circle"></i> Capítulo 1: Introducción
                                </h3>
                                <p class="card-text opacity-75 mb-0" id="chapter-description">
                                    Referencias y recursos adicionales para el primer capítulo
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- Search and Filter -->
                    <div class="row mb-4">
                        <div class="col-md-8">
                            <div class="input-group">
                                <span class="input-group-text">
                                    <i class="bi bi-search"></i>
                                </span>
                                <input type="text" class="form-control" id="search-referencias" placeholder="Buscar en las referencias...">
                            </div>
                        </div>
                        <div class="col-md-4">
                            <select class="form-select" id="sort-referencias">
                                <option value="numero">Ordenar por número</option>
                                <option value="pagina">Ordenar por página</option>
                                <option value="titulo">Ordenar por título</option>
                            </select>
                        </div>
                    </div>

                    <!-- Loading indicator -->
                    <div id="referencias-loading" class="text-center py-5">
                        <div class="spinner-border text-primary" role="status">
                            <span class="visually-hidden">Cargando referencias...</span>
                        </div>
                        <p class="mt-3 text-muted">Cargando referencias...</p>
                    </div>

                    <!-- Referencias Content -->
                    <div id="referencias-content">
                        <!-- Las referencias se cargan dinámicamente aquí -->
                    </div>

                    <!-- No results message -->
                    <div id="no-results" class="text-center py-5" style="display: none;">
                        <i class="bi bi-search display-1 text-muted"></i>
                        <h5 class="text-muted mt-3">No se encontraron referencias</h5>
                        <p class="text-muted">Intenta con otros términos de búsqueda</p>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Stats Section -->
    <section class="py-5 bg-light">
        <div class="container">
            <div class="row text-center">
                <div class="col-md-3 mb-4">
                    <div class="card border-0 h-100">
                        <div class="card-body">
                            <i class="bi bi-journal-text text-primary display-4 mb-3"></i>
                            <h4 class="fw-bold">5</h4>
                            <p class="text-muted mb-0">Capítulos</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card border-0 h-100">
                        <div class="card-body">
                            <i class="bi bi-bookmark-fill text-success display-4 mb-3"></i>
                            <h4 class="fw-bold">25+</h4>
                            <p class="text-muted mb-0">Referencias</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card border-0 h-100">
                        <div class="card-body">
                            <i class="bi bi-wikipedia text-warning display-4 mb-3"></i>
                            <h4 class="fw-bold">100%</h4>
                            <p class="text-muted mb-0">Con Wikipedia</p>
                        </div>
                    </div>
                </div>
                <div class="col-md-3 mb-4">
                    <div class="card border-0 h-100">
                        <div class="card-body">
                            <i class="bi bi-search text-info display-4 mb-3"></i>
                            <h4 class="fw-bold">Fácil</h4>
                            <p class="text-muted mb-0">Búsqueda</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="bg-dark text-white py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-md-6">
                    <h6 class="fw-bold">Referencias Bibliográficas</h6>
                    <p class="text-muted mb-0">Recursos organizados por capítulo</p>
                </div>
                <div class="col-md-6 text-md-end">
                    <a href="index.html" class="btn btn-outline-light btn-sm me-2">
                        <i class="bi bi-house"></i> Inicio
                    </a>
                    <a href="timeline.html" class="btn btn-outline-light btn-sm">
                        <i class="bi bi-clock-history"></i> Timeline
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap 5.3 JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JS -->
    <script src="assets/js/main.js"></script>

    <script>
        // Datos extendidos de referencias
        const referenciasData = {
            'capitulo-1': {
                title: 'Capítulo 1: Introducción',
                description: 'Referencias y recursos adicionales para el primer capítulo',
                referencias: [
                    {
                        numero: 1,
                        pagina: 15,
                        titulo: 'Historia de la Tecnología',
                        resumen: 'Evolución de la tecnología desde sus inicios hasta la era moderna. Un análisis comprehensivo de los avances tecnológicos.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Historia_de_la_tecnolog%C3%ADa'
                    },
                    {
                        numero: 2,
                        pagina: 23,
                        titulo: 'Revolución Industrial',
                        resumen: 'Transformación económica y social ocurrida entre 1760 y 1840. Cambios fundamentales en la producción y sociedad.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Revoluci%C3%B3n_Industrial'
                    },
                    {
                        numero: 3,
                        pagina: 31,
                        titulo: 'Filosofía de la Ciencia',
                        resumen: 'Estudio de los fundamentos, métodos e implicaciones de la ciencia y el conocimiento científico.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Filosof%C3%ADa_de_la_ciencia'
                    }
                ]
            },
            'capitulo-2': {
                title: 'Capítulo 2: Desarrollo',
                description: 'Recursos para el desarrollo de los conceptos principales',
                referencias: [
                    {
                        numero: 4,
                        pagina: 45,
                        titulo: 'Inteligencia Artificial',
                        resumen: 'Desarrollo de sistemas que pueden realizar tareas que requieren inteligencia humana.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Inteligencia_artificial'
                    },
                    {
                        numero: 5,
                        pagina: 52,
                        titulo: 'Machine Learning',
                        resumen: 'Subcampo de la inteligencia artificial que se centra en algoritmos que mejoran automáticamente.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Aprendizaje_autom%C3%A1tico'
                    }
                ]
            },
            'capitulo-3': {
                title: 'Capítulo 3: Análisis',
                description: 'Análisis profundo de los temas tratados',
                referencias: [
                    {
                        numero: 6,
                        pagina: 67,
                        titulo: 'Sociología de la Tecnología',
                        resumen: 'Estudio de las relaciones entre sociedad y tecnología, y cómo se influencian mutuamente.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Sociolog%C3%ADa_de_la_tecnolog%C3%ADa'
                    }
                ]
            },
            'capitulo-4': {
                title: 'Capítulo 4: Síntesis',
                description: 'Síntesis de los conceptos principales',
                referencias: [
                    {
                        numero: 7,
                        pagina: 78,
                        titulo: 'Ética de la Tecnología',
                        resumen: 'Rama de la ética aplicada que examina las cuestiones morales relacionadas con la tecnología.',
                        wikipedia: 'https://es.wikipedia.org/wiki/%C3%89tica_de_la_tecnolog%C3%ADa'
                    }
                ]
            },
            'capitulo-5': {
                title: 'Capítulo 5: Conclusiones',
                description: 'Conclusiones y reflexiones finales',
                referencias: [
                    {
                        numero: 8,
                        pagina: 89,
                        titulo: 'Futuro de la Humanidad',
                        resumen: 'Especulaciones y análisis sobre el desarrollo futuro de la especie humana.',
                        wikipedia: 'https://es.wikipedia.org/wiki/Futuro_de_la_humanidad'
                    }
                ]
            }
        };

        let currentChapter = 'capitulo-1';
        let currentSort = 'numero';

        // Cargar capítulo
        function loadChapter(chapter, element) {
            // Actualizar navegación activa
            document.querySelectorAll('.nav-link').forEach(link => {
                link.classList.remove('active');
            });
            element.classList.add('active');

            currentChapter = chapter;
            const data = referenciasData[chapter];

            // Actualizar título del capítulo
            document.getElementById('chapter-title').innerHTML = `<i class="bi bi-${chapter.charAt(chapter.length-1)}-circle"></i> ${data.title}`;
            document.getElementById('chapter-description').textContent = data.description;

            // Mostrar loading
            document.getElementById('referencias-loading').style.display = 'block';
            document.getElementById('referencias-content').style.display = 'none';

            // Simular carga
            setTimeout(() => {
                renderReferencias(data.referencias);
                updateStats();
                document.getElementById('referencias-loading').style.display = 'none';
                document.getElementById('referencias-content').style.display = 'block';
            }, 500);
        }

        // Renderizar referencias
        function renderReferencias(referencias) {
            const container = document.getElementById('referencias-content');
            container.innerHTML = '';

            referencias.forEach(ref => {
                const card = `
                    <div class="referencia-card card fade-in-up mb-4">
                        <div class="card-header bg-transparent border-0 d-flex align-items-center">
                            <div class="referencia-number">${ref.numero}</div>
                            <div>
                                <h6 class="mb-0 fw-bold">Referencia ${ref.numero}</h6>
                                <small class="text-muted">Página ${ref.pagina}</small>
                            </div>
                        </div>
                        <div class="card-body">
                            <h5 class="card-title">${ref.titulo}</h5>
                            <p class="card-text text-muted">${ref.resumen}</p>
                            <div class="d-flex gap-2">
                                <a href="${ref.wikipedia}" target="_blank" class="btn btn-outline-primary">
                                    <i class="bi bi-wikipedia"></i> Ver en Wikipedia
                                </a>
                                <button class="btn btn-outline-secondary" onclick="copyReference(${ref.numero})">
                                    <i class="bi bi-clipboard"></i> Copiar cita
                                </button>
                            </div>
                        </div>
                    </div>
                `;
                container.innerHTML += card;
            });
        }

        // Actualizar estadísticas
        function updateStats() {
            const totalRefs = Object.values(referenciasData).reduce((total, chapter) => total + chapter.referencias.length, 0);
            const currentRefs = referenciasData[currentChapter].referencias.length;
            
            document.getElementById('total-referencias').textContent = totalRefs;
            document.getElementById('current-chapter-refs').textContent = currentRefs;
        }

        // Copiar referencia
        function copyReference(numero) {
        const text = `Referencia ${numero} - Ver detalles en el sitio de Ciencia, Tecnologia y Sociedad`;
            navigator.clipboard.writeText(text).then(() => {
                utils.showToast('Referencia copiada al portapapeles', 'success');
            });
        }

        // Búsqueda en tiempo real
        document.getElementById('search-referencias').addEventListener('input', function(e) {
            const searchTerm = e.target.value.toLowerCase();
            const cards = document.querySelectorAll('.referencia-card');
            let visibleCount = 0;

            cards.forEach(card => {
                const text = card.textContent.toLowerCase();
                if (text.includes(searchTerm)) {
                    card.style.display = 'block';
                    visibleCount++;
                } else {
                    card.style.display = 'none';
                }
            });

            document.getElementById('no-results').style.display = visibleCount === 0 ? 'block' : 'none';
        });

        // Ordenamiento
        document.getElementById('sort-referencias').addEventListener('change', function(e) {
            currentSort = e.target.value;
            const data = referenciasData[currentChapter];
            let sortedRefs = [...data.referencias];

            switch(currentSort) {
                case 'pagina':
                    sortedRefs.sort((a, b) => a.pagina - b.pagina);
                    break;
                case 'titulo':
                    sortedRefs.sort((a, b) => a.titulo.localeCompare(b.titulo));
                    break;
                default:
                    sortedRefs.sort((a, b) => a.numero - b.numero);
            }

            renderReferencias(sortedRefs);
        });

        // Inicializar página
        document.addEventListener('DOMContentLoaded', function() {
            loadChapter('capitulo-1', document.querySelector('[data-chapter="capitulo-1"]'));
        });
    </script>
</body>
</html>
